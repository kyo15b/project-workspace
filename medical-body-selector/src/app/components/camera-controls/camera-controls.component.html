<!-- ç›¸æ©Ÿæ§åˆ¶çµ„ä»¶æ¨£æ¿ -->
<div class="camera-controls">
  
  <!-- æ§åˆ¶é¢æ¿åˆ‡æ›æŒ‰éˆ• -->
  <button 
    class="controls-toggle-button"
    [class.active]="isControlsVisible"
    (click)="toggleControlsVisibility()"
    title="åˆ‡æ›ç›¸æ©Ÿæ§åˆ¶é¢æ¿"
  >
    <span class="toggle-icon">ğŸ“·</span>
    <span class="toggle-text">ç›¸æ©Ÿæ§åˆ¶</span>
  </button>

  <!-- æ§åˆ¶é¢æ¿ -->
  <div 
    class="controls-panel"
    [class.visible]="isControlsVisible"
    [class.animating]="isAnimating"
  >
    
    <!-- é¢æ¿æ¨™é¡Œ -->
    <div class="panel-header">
      <h3 class="panel-title">
        <span class="title-icon">ğŸ¥</span>
        ç›¸æ©Ÿæ§åˆ¶
      </h3>
      <button 
        class="close-button"
        (click)="toggleControlsVisibility()"
        title="é—œé–‰æ§åˆ¶é¢æ¿"
      >
        âœ•
      </button>
    </div>

    <!-- å¿«é€Ÿè¦–è§’åˆ‡æ› -->
    <div class="section quick-presets">
      <h4 class="section-title">å¿«é€Ÿè¦–è§’</h4>
      <div class="preset-grid">
        <button
          *ngFor="let preset of cameraPresets"
          class="preset-button"
          [class.active]="isPresetActive(preset.name)"
          [disabled]="isAnimating"
          (click)="applyCameraPreset(preset)"
          [title]="preset.description"
        >
          <span class="preset-icon">{{ preset.icon }}</span>
          <span class="preset-name">{{ preset.displayName }}</span>
        </button>
      </div>
    </div>

    <!-- ç›¸æ©Ÿæ“ä½œ -->
    <div class="section camera-actions">
      <h4 class="section-title">ç›¸æ©Ÿæ“ä½œ</h4>
      <div class="action-buttons">
        <button 
          class="action-button reset-button"
          [disabled]="isAnimating"
          (click)="resetCamera()"
          title="é‡ç½®ç›¸æ©Ÿåˆ°é è¨­ä½ç½®"
        >
          <span class="button-icon">ğŸ”„</span>
          <span class="button-text">é‡ç½®</span>
        </button>
        
        <button 
          class="action-button auto-rotate-button"
          [class.active]="controlSettings.autoRotate"
          (click)="toggleAutoRotate()"
          title="åˆ‡æ›è‡ªå‹•æ—‹è½‰"
        >
          <span class="button-icon">ğŸ”„</span>
          <span class="button-text">è‡ªå‹•æ—‹è½‰</span>
        </button>
      </div>
    </div>

    <!-- æ§åˆ¶è¨­ç½® -->
    <div class="section control-settings">
      <h4 class="section-title">æ§åˆ¶è¨­ç½®</h4>
      
      <!-- é–‹é—œè¨­ç½® -->
      <div class="settings-group">
        <div class="setting-item">
          <label class="setting-label">
            <input 
              type="checkbox" 
              class="setting-checkbox"
              [checked]="controlSettings.enableZoom"
              (change)="updateControlSetting('enableZoom', $event.target?.checked)"
            >
            <span class="setting-text">ç¸®æ”¾</span>
          </label>
        </div>
        
        <div class="setting-item">
          <label class="setting-label">
            <input 
              type="checkbox" 
              class="setting-checkbox"
              [checked]="controlSettings.enableRotate"
              (change)="updateControlSetting('enableRotate', $event.target?.checked)"
            >
            <span class="setting-text">æ—‹è½‰</span>
          </label>
        </div>
        
        <div class="setting-item">
          <label class="setting-label">
            <input 
              type="checkbox" 
              class="setting-checkbox"
              [checked]="controlSettings.enablePan"
              (change)="updateControlSetting('enablePan', $event.target?.checked)"
            >
            <span class="setting-text">å¹³ç§»</span>
          </label>
        </div>
      </div>

      <!-- æ»‘æ¡¿è¨­ç½® -->
      <div class="settings-group">
        <div class="setting-item">
          <label class="setting-label full-width">
            <span class="setting-text">ç¸®æ”¾é€Ÿåº¦</span>
            <input 
              type="range" 
              class="setting-range"
              min="0.1" 
              max="2.0" 
              step="0.1"
              [value]="controlSettings.zoomSpeed"
              (input)="updateControlSetting('zoomSpeed', +($event.target?.value || 1))"
            >
            <span class="setting-value">{{ controlSettings.zoomSpeed.toFixed(1) }}</span>
          </label>
        </div>
        
        <div class="setting-item">
          <label class="setting-label full-width">
            <span class="setting-text">æ—‹è½‰é€Ÿåº¦</span>
            <input 
              type="range" 
              class="setting-range"
              min="0.1" 
              max="2.0" 
              step="0.1"
              [value]="controlSettings.rotateSpeed"
              (input)="updateControlSetting('rotateSpeed', +($event.target?.value || 1))"
            >
            <span class="setting-value">{{ controlSettings.rotateSpeed.toFixed(1) }}</span>
          </label>
        </div>
        
        <div class="setting-item" *ngIf="controlSettings.autoRotate">
          <label class="setting-label full-width">
            <span class="setting-text">è‡ªå‹•æ—‹è½‰é€Ÿåº¦</span>
            <input 
              type="range" 
              class="setting-range"
              min="0.1" 
              max="5.0" 
              step="0.1"
              [value]="controlSettings.autoRotateSpeed"
              (input)="updateControlSetting('autoRotateSpeed', +($event.target?.value || 1))"
            >
            <span class="setting-value">{{ controlSettings.autoRotateSpeed.toFixed(1) }}</span>
          </label>
        </div>
        
        <div class="setting-item">
          <label class="setting-label full-width">
            <span class="setting-text">æœ€å°è·é›¢</span>
            <input 
              type="range" 
              class="setting-range"
              min="0.5" 
              max="5.0" 
              step="0.1"
              [value]="controlSettings.minDistance"
              (input)="updateControlSetting('minDistance', +($event.target?.value || 1))"
            >
            <span class="setting-value">{{ controlSettings.minDistance.toFixed(1) }}</span>
          </label>
        </div>
        
        <div class="setting-item">
          <label class="setting-label full-width">
            <span class="setting-text">æœ€å¤§è·é›¢</span>
            <input 
              type="range" 
              class="setting-range"
              min="5.0" 
              max="20.0" 
              step="0.5"
              [value]="controlSettings.maxDistance"
              (input)="updateControlSetting('maxDistance', +($event.target?.value || 10))"
            >
            <span class="setting-value">{{ controlSettings.maxDistance.toFixed(1) }}</span>
          </label>
        </div>
      </div>
    </div>

    <!-- ç›¸æ©Ÿè³‡è¨Š -->
    <div class="section camera-info">
      <h4 class="section-title">ç›¸æ©Ÿè³‡è¨Š</h4>
      <div class="info-content">
        <div class="info-text">{{ getCameraInfo() }}</div>
      </div>
    </div>

  </div>

  <!-- å¿«é€Ÿæ§åˆ¶æŒ‰éˆ•ï¼ˆæµ®å‹•ï¼‰ -->
  <div class="quick-controls" [class.hidden]="isControlsVisible">
    <button 
      class="quick-button"
      (click)="resetCamera()"
      [disabled]="isAnimating"
      title="é‡ç½®ç›¸æ©Ÿ"
    >
      ğŸ”„
    </button>
    
    <button 
      class="quick-button"
      [class.active]="controlSettings.autoRotate"
      (click)="toggleAutoRotate()"
      title="è‡ªå‹•æ—‹è½‰"
    >
      ğŸ”„
    </button>
  </div>

</div>